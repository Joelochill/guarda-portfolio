---
import { getImage } from 'astro:assets';
import { getAbsoluteLocaleUrl } from 'astro:i18n';
import { backgroundUrl } from '../cms/queries';
import Layout from '../layouts/Layout.astro';

const title = 'Home';
const description =
  'Página oficial de GUARDA, el proyecto musical de Joel Rico Rada. Descubre su música, conciertos y trayectoria.';

const background = await getImage({
  src: backgroundUrl,
  format: 'webp',
  inferSize: true,
});

const { site: siteUrl, currentLocale } = Astro;
const { href: pageUrl, pathname: currentPath } = Astro.url;

const structuredData = {
  '@context': 'https://schema.org',
  '@type': ['WebSite', 'Organization'],
  '@id': `${siteUrl}/#website`,
  url: pageUrl,
  name: 'Joel Rico Rada | GUARDA',
  description:
    'Sitio oficial del artista sonoro Joel Rico Rada y su proyecto GUARDA.',
  inLanguage: currentLocale,
  alternate: getAbsoluteLocaleUrl('en', currentPath),
  publisher: {
    '@type': 'MusicGroup',
    '@id': `${siteUrl}/#guarda`,
    name: 'GUARDA',
    description: 'Proyecto experimental de música oscura y ruidosa.',
    image: `${siteUrl}/android-chrome-512x512.png`,
  },
};
---

<Layout
  title={title}
  description={description}
  structuredData={structuredData}
  backgroundImage={background}
>
  <main transition:name="main" transition:animate="fade"></main>
</Layout>
